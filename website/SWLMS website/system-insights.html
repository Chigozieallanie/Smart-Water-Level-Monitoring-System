<!doctype html>
<html>

<head>
  <title>System Insights - Smart Water Monitoring</title>
  <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" media="screen" rel="stylesheet"
    type="text/css" />
  <link href="css/frame.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="css/controls.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="css/widgets.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="css/custom.css" media="screen" rel="stylesheet" type="text/css" />
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700&display=swap' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300,700&display=swap' rel='stylesheet'
    type='text/css'>
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/base/jquery-ui.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
  <script src="js/util.js"></script>
  <script src="js/widgets.js"></script>
  <script src="js/menu.js"></script>
  <script src="js/footer.js"></script>
  <script src="js/custom.js"></script>
  <style>
    .menu-system-insights {
      /* Specific class for this page's menu item */
      color: rgb(255, 255, 255) !important;
      opacity: 1 !important;
      font-weight: 700 !important;
    }

    /* Banner Styles */
    .insights-banner {
      min-height: 400px;
      position: relative;
      overflow: hidden;
    }

    .insights-banner::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(45deg,
          rgba(102, 126, 234, 0.05) 0%,
          rgba(118, 75, 162, 0.05) 50%,
          rgba(64, 123, 255, 0.05) 100%);
      pointer-events: none;
    }

    .banner-subtitle {
      font-size: 1.2em;
      opacity: 0.9;
      margin-top: 20px;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
      position: relative;
      z-index: 1;
    }

    /* Overview Cards */
    .overview-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 30px;
      margin-top: 30px;
    }

    .overview-card {
      background: linear-gradient(135deg,
          rgba(102, 126, 234, 0.1) 0%,
          rgba(118, 75, 162, 0.1) 50%,
          rgba(64, 123, 255, 0.1) 100%);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      padding: 30px;
      border-radius: 20px;
      text-align: center;
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1),
        0 5px 15px rgba(0, 0, 0, 0.07);
      transition: all 0.4s ease;
      position: relative;
      overflow: hidden;
    }

    .overview-card::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
      transform: rotate(-45deg);
      transition: transform 0.6s ease;
    }

    .overview-card:hover::before {
      transform: rotate(-45deg) translate(10px, 10px);
    }

    .overview-card:hover {
      transform: translateY(-8px) scale(1.02);
      box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15),
        0 10px 25px rgba(102, 126, 234, 0.2);
      border-color: rgba(102, 126, 234, 0.3);
    }

    .card-icon {
      font-size: 3em;
      color: var(--primary-color);
      margin-bottom: 20px;
      position: relative;
      z-index: 2;
      filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.1));
    }

    .overview-card h3,
    .analytics-card h4,
    .stat-card h4,
    .next-step-card h4 {
      position: relative;
      z-index: 2;
    }

    .overview-card p,
    .analytics-card p,
    .stat-card p,
    .next-step-card p {
      position: relative;
      z-index: 2;
    }

    /* Water droplet animation for special cards */
    .stat-card .stat-icon::after {
      content: '';
      position: absolute;
      top: -10px;
      right: -10px;
      width: 12px;
      height: 12px;
      background: radial-gradient(circle,
          rgba(102, 126, 234, 0.6) 0%,
          rgba(102, 126, 234, 0.2) 50%,
          transparent 100%);
      border-radius: 50%;
      animation: droplet 3s ease-in-out infinite;
    }

    @keyframes droplet {

      0%,
      100% {
        transform: scale(0.8) translateY(0px);
        opacity: 0.6;
      }

      50% {
        transform: scale(1.2) translateY(-5px);
        opacity: 1;
      }
    }

    /* Subtle gradient overlay for better text contrast */
    .overview-card::after,
    .analytics-card::after,
    .stat-card::after,
    .next-step-card::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg,
          rgba(255, 255, 255, 0.1) 0%,
          rgba(255, 255, 255, 0.05) 50%,
          rgba(255, 255, 255, 0.1) 100%);
      border-radius: inherit;
      pointer-events: none;
      z-index: 1;
    }

    /* Enhanced button styles */
    .step-link {
      background: linear-gradient(135deg,
          rgba(102, 126, 234, 0.1) 0%,
          rgba(118, 75, 162, 0.1) 100%);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(102, 126, 234, 0.2);
      padding: 12px 24px;
      border-radius: 25px;
      transition: all 0.3s ease;
      position: relative;
      z-index: 2;
    }

    .step-link:hover {
      background: linear-gradient(135deg,
          rgba(102, 126, 234, 0.2) 0%,
          rgba(118, 75, 162, 0.2) 100%);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);
    }

    @keyframes pulse {
      0% {
        opacity: 1;
      }

      50% {
        opacity: 0.5;
      }

      100% {
        opacity: 1;
      }
    }

    /* Architecture Styles */
    .architecture-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 40px;
      margin-top: 30px;
    }

    .specs-list {
      background: linear-gradient(135deg,
          rgba(45, 55, 72, 0.95) 0%,
          rgba(74, 85, 104, 0.95) 50%,
          rgba(45, 55, 72, 0.95) 100%);
      backdrop-filter: blur(15px);
      color: #ffffff;
      padding: 30px;
      border-radius: 20px;
      margin-top: 20px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2),
        0 10px 20px rgba(45, 55, 72, 0.3);
      border: 1px solid rgba(255, 255, 255, 0.1);
      position: relative;
      overflow: hidden;
      transition: all 0.4s ease;
    }

    .specs-list::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle,
          rgba(102, 126, 234, 0.1) 0%,
          transparent 70%);
      animation: float 8s ease-in-out infinite;
    }

    .specs-list:hover {
      transform: translateY(-5px);
      box-shadow: 0 30px 60px rgba(0, 0, 0, 0.25),
        0 15px 30px rgba(45, 55, 72, 0.4);
    }

    .spec-item {
      display: flex;
      justify-content: space-between;
      padding: 15px 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      transition: all 0.3s ease;
      position: relative;
      z-index: 2;
    }

    .spec-item:last-child {
      border-bottom: none;
    }

    .spec-item:hover {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 8px;
      padding: 15px 10px;
      margin: 0 -10px;
    }

    .spec-label {
      font-weight: 700;
      color: #64b5f6;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
      font-size: 1.1em;
    }

    .spec-value {
      font-weight: 600;
      color: #ffffff;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
    }

    /* Performance Dashboard */
    .performance-dashboard {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 40px;
      margin-top: 30px;
    }

    .analytics-cards {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .analytics-card {
      background: linear-gradient(135deg,
          rgba(56, 178, 172, 0.15) 0%,
          rgba(129, 236, 236, 0.15) 50%,
          rgba(0, 180, 216, 0.15) 100%);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(255, 255, 255, 0.25);
      color: #2c3e50;
      padding: 25px;
      border-radius: 20px;
      text-align: center;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1),
        0 5px 15px rgba(56, 178, 172, 0.1);
      transition: all 0.4s ease;
      position: relative;
      overflow: hidden;
    }

    .analytics-card::after {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg,
          transparent,
          rgba(255, 255, 255, 0.2),
          transparent);
      transition: left 0.6s ease;
    }

    .analytics-card:hover::after {
      left: 100%;
    }

    .analytics-card:hover {
      transform: translateY(-3px) scale(1.02);
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15),
        0 8px 20px rgba(56, 178, 172, 0.2);
      border-color: rgba(56, 178, 172, 0.4);
    }

    .card-header {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      margin-bottom: 15px;
    }

    .card-header h4 {
      margin: 0;
      font-weight: 600;
      color: #2c3e50;
    }

    .card-header i {
      color: var(--primary-color);
      font-size: 1.2em;
    }

    .stat-number {
      font-size: 2.5em;
      font-weight: 700;
      display: block;
      color: var(--primary-color);
      margin: 10px 0;
    }

    .stat-label {
      font-size: 0.9em;
      opacity: 0.8;
      font-weight: 500;
      color: #5a6c7d;
    }

    /* Timeline Styles */
    .walkthrough-timeline {
      position: relative;
      margin-top: 30px;
    }

    .timeline-item {
      display: flex;
      margin-bottom: 40px;
      position: relative;
    }

    .timeline-marker {
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 30px;
      flex-shrink: 0;
    }

    .step-number {
      color: white;
      font-weight: 700;
      font-size: 1.2em;
    }

    .timeline-content {
      display: flex;
      align-items: center;
      gap: 30px;
      background: linear-gradient(135deg,
          rgba(26, 32, 44, 0.95) 0%,
          rgba(45, 55, 72, 0.95) 25%,
          rgba(74, 85, 104, 0.95) 75%,
          rgba(26, 32, 44, 0.95) 100%);
      backdrop-filter: blur(15px);
      color: #ffffff;
      padding: 30px;
      border-radius: 20px;
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2),
        0 8px 20px rgba(26, 32, 44, 0.3);
      flex: 1;
      border: 1px solid rgba(255, 255, 255, 0.1);
      transition: all 0.4s ease;
      position: relative;
      overflow: hidden;
    }

    .timeline-content::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg,
          transparent,
          rgba(102, 126, 234, 0.2),
          transparent);
      transition: left 0.8s ease;
    }

    .timeline-content:hover::before {
      left: 100%;
    }

    .timeline-content:hover {
      transform: translateX(10px) translateY(-5px);
      box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3),
        0 15px 30px rgba(26, 32, 44, 0.4);
      border-color: rgba(102, 126, 234, 0.3);
    }

    .timeline-content h3 {
      color: #64b5f6;
      margin-bottom: 15px;
      font-weight: 700;
      font-size: 1.3em;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
      position: relative;
      z-index: 2;
    }

    .timeline-content p {
      color: #e2e8f0;
      line-height: 1.6;
      font-weight: 400;
      font-size: 1.05em;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
      position: relative;
      z-index: 2;
    }

    .timeline-content .step-description {
      color: #cbd5e0;
      font-size: 0.95em;
      margin-top: 10px;
      font-style: italic;
      position: relative;
      z-index: 2;
    }

    .timeline-image img {
      width: 150px;
      height: 100px;
      object-fit: cover;
      border-radius: 12px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
      border: 2px solid rgba(255, 255, 255, 0.1);
      transition: all 0.3s ease;
      position: relative;
      z-index: 2;
    }

    .timeline-image img:hover {
      transform: scale(1.05);
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.4);
      border-color: rgba(102, 126, 234, 0.3);
    }

    /* Impact Assessment */
    .impact-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 30px;
      margin-bottom: 40px;
    }

    .stat-card {
      background: linear-gradient(135deg,
          rgba(72, 187, 120, 0.15) 0%,
          rgba(104, 211, 145, 0.15) 50%,
          rgba(34, 197, 94, 0.15) 100%);
      backdrop-filter: blur(12px);
      padding: 30px;
      border-radius: 20px;
      text-align: center;
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1),
        0 5px 15px rgba(72, 187, 120, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-left: 5px solid var(--primary-color);
      position: relative;
      overflow: hidden;
      transition: all 0.4s ease;
    }

    .stat-card::before {
      content: '';
      position: absolute;
      top: -2px;
      left: -2px;
      right: -2px;
      bottom: -2px;
      background: linear-gradient(135deg,
          rgba(72, 187, 120, 0.2) 0%,
          rgba(104, 211, 145, 0.2) 50%,
          rgba(34, 197, 94, 0.2) 100%);
      border-radius: 22px;
      z-index: -1;
      opacity: 0;
      transition: opacity 0.4s ease;
    }

    .stat-card:hover::before {
      opacity: 1;
    }

    .stat-card:hover {
      transform: translateY(-5px) scale(1.02);
      box-shadow: 0 20px 45px rgba(0, 0, 0, 0.15),
        0 10px 25px rgba(72, 187, 120, 0.2);
    }

    .stat-icon {
      font-size: 3em;
      color: var(--primary-color);
      margin-bottom: 20px;
    }

    .stat-card .stat-number {
      font-size: 3em;
      font-weight: 700;
      color: var(--primary-color);
      margin: 10px 0;
    }

    .stat-description {
      color: #666;
      font-size: 0.9em;
    }

    /* Testimonials */
    .testimonial-carousel {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 30px;
      margin-top: 30px;
    }

    .testimonial-item {
      background: linear-gradient(135deg,
          rgba(245, 87, 108, 0.9) 0%,
          rgba(240, 147, 251, 0.9) 50%,
          rgba(102, 126, 234, 0.9) 100%);
      backdrop-filter: blur(10px);
      color: white;
      padding: 35px;
      border-radius: 25px;
      text-align: center;
      position: relative;
      overflow: hidden;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15),
        0 10px 20px rgba(245, 87, 108, 0.2);
      transition: all 0.4s ease;
    }

    .testimonial-item::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
      animation: float 6s ease-in-out infinite;
    }

    .testimonial-item:hover {
      transform: translateY(-8px) scale(1.02);
      box-shadow: 0 30px 60px rgba(0, 0, 0, 0.2),
        0 15px 30px rgba(245, 87, 108, 0.3);
    }

    @keyframes float {

      0%,
      100% {
        transform: translateY(0px) rotate(0deg);
      }

      50% {
        transform: translateY(-20px) rotate(180deg);
      }
    }

    .testimonial-author {
      margin-top: 20px;
      padding-top: 20px;
      border-top: 1px solid rgba(255, 255, 255, 0.3);
    }

    .author-name {
      font-weight: 700;
      display: block;
    }

    .author-role {
      font-size: 0.9em;
      opacity: 0.9;
    }

    /* Insights Lists */
    .insights-list {
      list-style: none;
      padding: 0;
    }

    .insights-list li {
      background: #f8f9fa;
      padding: 15px;
      margin-bottom: 10px;
      border-radius: 8px;
      border-left: 4px solid var(--primary-color);
    }

    /* Next Steps */
    .next-steps-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 30px;
      margin-top: 30px;
    }

    .next-step-card {
      background: linear-gradient(135deg,
          rgba(139, 92, 246, 0.15) 0%,
          rgba(167, 139, 250, 0.15) 50%,
          rgba(196, 181, 253, 0.15) 100%);
      backdrop-filter: blur(15px);
      padding: 35px;
      border-radius: 25px;
      text-align: center;
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1),
        0 5px 15px rgba(139, 92, 246, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      transition: all 0.4s ease;
      position: relative;
      overflow: hidden;
    }

    .next-step-card::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(45deg,
          transparent 30%,
          rgba(255, 255, 255, 0.1) 50%,
          transparent 70%);
      transform: translateX(-100%);
      transition: transform 0.6s ease;
    }

    .next-step-card:hover::after {
      transform: translateX(100%);
    }

    .next-step-card:hover {
      transform: translateY(-8px) scale(1.02);
      box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15),
        0 10px 25px rgba(139, 92, 246, 0.2);
      border-color: rgba(139, 92, 246, 0.3);
    }

    .step-icon {
      font-size: 3em;
      color: var(--primary-color);
      margin-bottom: 20px;
    }

    .step-link {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      color: var(--primary-color);
      text-decoration: none;
      font-weight: 600;
      margin-top: 15px;
      transition: color 0.3s ease;
    }

    .step-link:hover {
      color: var(--secondary-color);
    }

    /* Enhanced Bar Chart */
    .bar-chart .bar {
      position: relative;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      align-items: center;
      padding: 10px;
      margin: 0 10px;
      border-radius: 5px 5px 0 0;
    }

    .bar-label {
      writing-mode: vertical-lr;
      text-orientation: mixed;
      font-size: 0.8em;
      color: white;
      font-weight: 600;
      margin-bottom: 10px;
    }

    .bar-value {
      position: absolute;
      top: -30px;
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 5px 10px;
      border-radius: 5px;
      font-size: 0.8em;
      font-weight: 600;
    }

    /* ThingSpeak Integration Styles */
    .thingspeak-config {
      background: linear-gradient(135deg,
          rgba(16, 185, 129, 0.1) 0%,
          rgba(5, 150, 105, 0.1) 50%,
          rgba(4, 120, 87, 0.1) 100%);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 20px;
      padding: 30px;
      margin: 30px 0;
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1),
        0 5px 15px rgba(16, 185, 129, 0.1);
      position: relative;
      overflow: hidden;
    }

    .thingspeak-config::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: conic-gradient(from 0deg,
          transparent,
          rgba(255, 255, 255, 0.05),
          transparent,
          rgba(255, 255, 255, 0.05),
          transparent);
      animation: rotate 20s linear infinite;
    }

    @keyframes rotate {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }

    .config-panel h3 {
      color: #2c3e50;
      margin-bottom: 20px;
      text-align: center;
      font-weight: 700;
    }

    .config-inputs {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 20px;
    }

    .input-group {
      display: flex;
      flex-direction: column;
      margin-bottom: 20px;
    }

    .input-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #1a365d;
      font-size: 0.95em;
    }

    .input-group label i {
      margin-right: 8px;
      color: #0ea5e9;
      width: 16px;
    }

    .input-group input,
    .input-group select {
      width: 100%;
      padding: 12px 16px;
      border: 2px solid rgba(14, 165, 233, 0.2);
      border-radius: 10px;
      font-size: 1em;
      background: rgba(255, 255, 255, 0.9);
      transition: all 0.3s ease;
    }

    .input-group input:focus,
    .input-group select:focus {
      outline: none;
      border-color: #0ea5e9;
      box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.1);
      transform: translateY(-2px);
    }

    .input-hint {
      display: block;
      margin-top: 5px;
      font-size: 0.85em;
      color: #64748b;
      font-style: italic;
    }

    .control-buttons {
      display: flex;
      gap: 15px;
      margin-top: 25px;
    }

    .connect-btn,
    .disconnect-btn {
      padding: 12px 24px;
      border: none;
      border-radius: 10px;
      font-size: 1em;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .connect-btn {
      background: linear-gradient(135deg, #0ea5e9, #0284c7);
      color: white;
    }

    .connect-btn:hover {
      background: linear-gradient(135deg, #0284c7, #0369a1);
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(14, 165, 233, 0.3);
    }

    .disconnect-btn {
      background: linear-gradient(135deg, #ef4444, #dc2626);
      color: white;
    }

    .disconnect-btn:hover {
      background: linear-gradient(135deg, #dc2626, #b91c1c);
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(239, 68, 68, 0.3);
    }

    /* Enhanced Charts Styles */
    .charts-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
      padding: 20px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 15px;
      backdrop-filter: blur(10px);
    }

    .charts-header h4 {
      margin: 0;
      color: #1a365d;
      font-size: 1.3em;
      font-weight: 700;
    }

    .charts-header h4 i {
      margin-right: 10px;
      color: #0ea5e9;
    }

    .charts-info {
      display: flex;
      align-items: center;
    }

    .update-indicator {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.9em;
      font-weight: 600;
      color: #1a365d;
      background: rgba(40, 167, 69, 0.1);
      padding: 5px 12px;
      border-radius: 20px;
    }

    .embedded-chart {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 15px;
      padding: 20px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      transition: transform 0.3s ease;
    }

    .embedded-chart:hover {
      transform: translateY(-5px);
    }

    .chart-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .chart-header h5 {
      margin: 0;
      color: #1a365d;
      font-size: 1.1em;
      font-weight: 600;
    }

    .chart-header h5 i {
      margin-right: 8px;
      color: #0ea5e9;
    }

    .status-badge {
      background: #28a745;
      color: white;
      padding: 3px 8px;
      border-radius: 12px;
      font-size: 0.75em;
      font-weight: 700;
      letter-spacing: 0.5px;
    }

    .status-badge.active {
      background: #28a745;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0% {
        opacity: 1;
      }

      50% {
        opacity: 0.7;
      }

      100% {
        opacity: 1;
      }
    }

    .chart-container {
      margin-bottom: 15px;
    }

    .chart-description {
      padding: 10px;
      background: rgba(14, 165, 233, 0.05);
      border-radius: 8px;
      border-left: 4px solid #0ea5e9;
    }

    .chart-description p {
      margin: 0;
      color: #1a365d;
      font-size: 0.9em;
      line-height: 1.5;
    }

    /* Enhanced Insights Section Styles */
    .insights-container {
      margin-top: 30px;
    }

    .custom-tab-menu {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 30px;
    }

    .custom-tab-menu-item {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 15px;
      padding: 15px 20px;
      text-decoration: none;
      color: #1a365d;
      font-weight: 600;
      transition: all 0.3s ease;
      text-align: center;
      min-width: 150px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 5px;
    }

    .custom-tab-menu-item i {
      font-size: 1.2em;
      margin-bottom: 5px;
    }

    .tab-subtitle {
      font-size: 0.8em;
      color: #64748b;
      font-style: italic;
    }

    .custom-tab-menu-item:hover {
      background: rgba(14, 165, 233, 0.1);
      border-color: #0ea5e9;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(14, 165, 233, 0.2);
    }

    .custom-tab-menu-item.active {
      background: linear-gradient(135deg, #0ea5e9, #0284c7);
      color: white;
      border-color: #0ea5e9;
    }

    .custom-tab-menu-item.active .tab-subtitle {
      color: rgba(255, 255, 255, 0.8);
    }

    .insights-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 25px;
      margin-top: 25px;
    }

    .insight-card {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 15px;
      padding: 25px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      transition: all 0.3s ease;
      border: 1px solid rgba(14, 165, 233, 0.1);
    }

    .insight-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
      border-color: #0ea5e9;
    }

    .insight-icon {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, #0ea5e9, #0284c7);
      border-radius: 50%;
      margin-bottom: 20px;
      color: white;
      font-size: 1.5em;
    }

    .insight-card h4 {
      color: #1a365d;
      margin-bottom: 15px;
      font-size: 1.2em;
      font-weight: 700;
    }

    .insights-list {
      list-style: none;
      padding: 0;
    }

    .insights-list li {
      margin-bottom: 12px;
      padding-left: 20px;
      position: relative;
      line-height: 1.6;
      color: #374151;
    }

    .insights-list li:before {
      content: '‚úì';
      position: absolute;
      left: 0;
      color: #10b981;
      font-weight: bold;
      font-size: 1.1em;
    }

    .insights-list li strong {
      color: #1a365d;
      font-weight: 600;
    }

    .custom-tab-content {
      display: none;
      animation: fadeIn 0.3s ease-in-out;
    }

    .custom-tab-content.active {
      display: block;
    }

    .custom-tab-content h3 {
      color: #1a365d;
      margin-bottom: 20px;
      font-size: 1.5em;
      font-weight: 700;
      text-align: center;
    }

    .custom-tab-content h3 i {
      margin-right: 10px;
      color: #0ea5e9;
    }

    /* Mobile Responsiveness */
    @media (max-width: 768px) {
      .custom-tab-menu {
        flex-direction: column;
        align-items: center;
      }

      .custom-tab-menu-item {
        min-width: 200px;
        padding: 12px 16px;
      }

      .insights-grid {
        grid-template-columns: 1fr;
        gap: 20px;
      }

      .insight-card {
        padding: 20px;
      }

      .insight-icon {
        width: 50px;
        height: 50px;
        font-size: 1.3em;
      }

      .insight-card h4 {
        font-size: 1.1em;
      }

      .insights-list li {
        font-size: 0.9em;
      }
    }

    /* ...existing code... */
  </style>
</head>

<body class="system-insights-page">
  <div class="menu-container"></div>
  <div class="content-container">
    <!--Start Header Banner-->
    <div class="banner insights-banner" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);">
      <div class="banner-overlay"></div>
      <div class="banner-table flex-column">
        <div class="banner-content-area text-center">
          <h1 class="animated-fade-in-slow">SYSTEM INSIGHTS</h1>
          <h2 class="animated-fade-in-slow delay-500">Deep Dive into Our Smart Water Monitoring Solution</h2>
          <p class="banner-subtitle animated-fade-in-slow delay-1000">Explore the architecture, performance metrics, and
            real-world impact of our innovative system</p>
        </div>
      </div>
    </div>
    <!--End Header Banner-->

    <div class="content">
      <div class="content-table flex-column">

        <!--Start System Overview-->
        <section class="flex-row scroll-reveal-section" id="overview">
          <div class="flex-item flex-column">
            <h2>System Overview</h2>
            <hr>
            <div class="overview-grid">
              <div class="overview-card">
                <div class="card-icon">
                  <i class="fas fa-microchip"></i>
                </div>
                <h3>Smart Architecture</h3>
                <p>ESP32-based microcontroller system with real-time sensor integration and intelligent alert
                  mechanisms.</p>
              </div>
              <div class="overview-card">
                <div class="card-icon">
                  <i class="fas fa-chart-line"></i>
                </div>
                <h3>Performance Metrics</h3>
                <p>90% alert timeliness, 85% user satisfaction, and 80% reduction in manual monitoring requirements.</p>
              </div>
              <div class="overview-card">
                <div class="card-icon">
                  <i class="fas fa-users"></i>
                </div>
                <h3>Real-World Impact</h3>
                <p>Serving homeowners, institutions, and property managers with efficient water management solutions.
                </p>
              </div>
            </div>
          </div>
        </section>
        <!--End System Overview-->

        <!--Start System Architecture-->
        <section class="flex-row scroll-reveal-section" id="architecture">
          <div class="flex-item flex-column">
            <h2>System Architecture</h2>
            <hr>
            <div class="architecture-container">
              <div class="architecture-diagram">
                <div class="interactive-diagram-container">
                  <img src="img/project_design_diagram.png" alt="Project Design Diagram" usemap="#systemmap"
                    class="interactive-svg" id="project-design-svg">
                  <map name="systemmap">
                    <area shape="rect" coords="50,50,150,150" href="javascript:void(0)" alt="ESP32"
                      data-component="esp32" title="ESP32 Microcontroller">
                    <area shape="rect" coords="200,50,300,150" href="javascript:void(0)" alt="Ultrasonic Sensor"
                      data-component="ultrasonic" title="Ultrasonic Sensor">
                    <area shape="rect" coords="350,150,450,250" href="javascript:void(0)" alt="LCD Display"
                      data-component="lcd" title="LCD Display">
                    <!-- Add more clickable areas as needed based on your diagram.png structure. Coordinates might need adjustment for PNG. -->
                  </map>
                  <div id="component-popup" class="component-popup" style="display:none;">
                    <h4 id="popup-title">Component Detail</h4>
                    <p id="popup-description">Details about the selected component.</p>
                    <button id="close-popup-btn">Close</button>
                  </div>
                </div>
                <p class="image-caption">Figure 1: Interactive System Architecture - Click components to learn more</p>
              </div>
              <div class="architecture-details">
                <h3>Technical Specifications</h3>
                <div class="specs-list">
                  <div class="spec-item">
                    <span class="spec-label">Microcontroller:</span>
                    <span class="spec-value">ESP32 (Dual-core, WiFi enabled)</span>
                  </div>
                  <div class="spec-item">
                    <span class="spec-label">Primary Sensor:</span>
                    <span class="spec-value">HC-SR04 Ultrasonic (2-400cm range)</span>
                  </div>
                  <div class="spec-item">
                    <span class="spec-label">Flow Detection:</span>
                    <span class="spec-value">YF-S201 Water Flow Sensor</span>
                  </div>
                  <div class="spec-item">
                    <span class="spec-label">Display:</span>
                    <span class="spec-value">LCD 1602 with I2C Interface</span>
                  </div>
                  <div class="spec-item">
                    <span class="spec-label">Power Supply:</span>
                    <span class="spec-value">9V Battery with Power Management</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
        <!--End System Architecture-->

        <!--Start Performance Analytics-->
        <section class="flex-row scroll-reveal-section" id="performance">
          <div class="flex-item flex-column">
            <h2><i class="fas fa-chart-line"></i> Real-Time Performance Analytics</h2>
            <hr>
            <p class="text">Experience live data visualization powered by ThingSpeak IoT platform. Monitor your water
              system's performance with real-time updates, advanced analytics, and comprehensive insights.</p>

            <!-- Enhanced ThingSpeak Configuration Panel -->
            <div class="thingspeak-config">
              <div class="config-panel">
                <div class="config-header">
                  <h3><i class="fas fa-cogs"></i> IoT Data Connection</h3>
                  <div class="connection-status" id="connectionStatus">
                    <i class="fas fa-circle" style="color: #ffc107;"></i> Ready to Connect
                  </div>
                </div>
                <div class="config-inputs">
                  <div class="input-group">
                    <label for="channelId"><i class="fas fa-satellite-dish"></i> Channel ID:</label>
                    <input type="text" id="channelId" placeholder="Enter your ThingSpeak Channel ID" value="3001129">
                    <span class="input-hint">Your unique channel identifier</span>
                  </div>
                  <div class="input-group">
                    <label for="apiKey"><i class="fas fa-key"></i> Read API Key:</label>
                    <input type="text" id="apiKey" placeholder="Enter your ThingSpeak Read API Key"
                      value="ON4ULBWQ12ZVQ11X">
                    <span class="input-hint">Secure access key for data retrieval</span>
                  </div>
                  <div class="input-group">
                    <label for="updateInterval"><i class="fas fa-clock"></i> Update Frequency:</label>
                    <select id="updateInterval">
                      <option value="15">‚ö° Real-time (15 seconds)</option>
                      <option value="30" selected>üîÑ Standard (30 seconds)</option>
                      <option value="60">‚è∞ Moderate (1 minute)</option>
                      <option value="300">üíæ Power Save (5 minutes)</option>
                    </select>
                    <span class="input-hint">How often data refreshes</span>
                  </div>
                  <div class="control-buttons">
                    <button id="connectBtn" class="connect-btn">
                      <i class="fas fa-plug"></i> Connect to ThingSpeak
                    </button>
                    <button id="disconnectBtn" class="disconnect-btn" style="display: none;">
                      <i class="fas fa-times"></i> Disconnect
                    </button>
                  </div>
                </div>
                <div class="connection-status" id="connectionStatus">
                  <span class="status-indicator disconnected"></span>
                  <span class="status-text">Disconnected</span>
                </div>
              </div>
            </div>

            <!-- Real-time Data Dashboard -->
            <div class="performance-dashboard">
              <!-- Live Charts Section -->
              <div class="live-charts-section">
                <h3>Live System Monitoring</h3>

                <!-- Water Level Chart -->
                <div class="chart-container">
                  <div class="chart-header">
                    <h4><i class="fas fa-tint"></i> Water Level Monitoring</h4>
                    <div class="chart-controls">
                      <button class="chart-btn active" data-range="1">1H</button>
                      <button class="chart-btn" data-range="6">6H</button>
                      <button class="chart-btn" data-range="24">24H</button>
                      <button class="chart-btn" data-range="168">7D</button>
                    </div>
                  </div>
                  <div class="chart-wrapper">
                    <canvas id="waterLevelChart" width="800" height="300"></canvas>
                    <div class="chart-loading" id="waterLevelLoading">
                      <i class="fas fa-spinner fa-spin"></i> Loading real-time data...
                    </div>
                  </div>
                  <div class="chart-info">
                    <span class="info-item">
                      <i class="fas fa-circle text-primary"></i> Current Level: <span id="currentLevel">--</span>%
                    </span>
                    <span class="info-item">
                      <i class="fas fa-arrow-up text-success"></i> Trend: <span id="levelTrend">--</span>
                    </span>
                    <span class="info-item">
                      <i class="fas fa-clock text-info"></i> Last Update: <span id="lastUpdate">--</span>
                    </span>
                  </div>
                </div>

                <!-- Multi-parameter Chart -->
                <div class="chart-container">
                  <div class="chart-header">
                    <h4><i class="fas fa-chart-line"></i> System Performance Metrics</h4>
                    <div class="chart-legend">
                      <span class="legend-item">
                        <i class="fas fa-circle" style="color: #36a2eb;"></i> Temperature
                      </span>
                      <span class="legend-item">
                        <i class="fas fa-circle" style="color: #ff6384;"></i> Humidity
                      </span>
                      <span class="legend-item">
                        <i class="fas fa-circle" style="color: #4bc0c0;"></i> Flow Rate
                      </span>
                    </div>
                  </div>
                  <div class="chart-wrapper">
                    <canvas id="multiParamChart" width="800" height="300"></canvas>
                    <div class="chart-loading" id="multiParamLoading">
                      <i class="fas fa-spinner fa-spin"></i> Loading system metrics...
                    </div>
                  </div>
                </div>

                <!-- Enhanced ThingSpeak Live Charts -->
                <div class="embedded-charts">
                  <div class="charts-header">
                    <h4><i class="fas fa-external-link-alt"></i> ThingSpeak Live Data Streams</h4>
                    <div class="charts-info">
                      <span class="update-indicator">
                        <i class="fas fa-circle" style="color: #28a745;"></i>
                        Live Updates Every 15 seconds
                      </span>
                    </div>
                  </div>
                  <div class="embedded-chart-grid">
                    <div class="embedded-chart">
                      <div class="chart-header">
                        <h5><i class="fas fa-tint"></i> Water Level Monitoring</h5>
                        <div class="chart-status">
                          <span class="status-badge active">ACTIVE</span>
                        </div>
                      </div>
                      <div class="chart-container">
                        <iframe id="thingspeakChart1" width="100%" height="280"
                          style="border: 1px solid #e0e0e0; border-radius: 8px;"
                          src="https://thingspeak.com/channels/3001129/charts/1?bgcolor=%23ffffff&color=%23d62020&dynamic=true&results=60&type=line&update=15">
                        </iframe>
                      </div>
                      <div class="chart-description">
                        <p>Real-time water level measurements showing tank capacity utilization</p>
                      </div>
                    </div>
                    <div class="embedded-chart">
                      <div class="chart-header">
                        <h5><i class="fas fa-stream"></i> Flow Rate Analysis</h5>
                        <div class="chart-status">
                          <span class="status-badge active">ACTIVE</span>
                        </div>
                      </div>
                      <div class="chart-container">
                        <iframe id="thingspeakChart2" width="100%" height="280"
                          style="border: 1px solid #e0e0e0; border-radius: 8px;"
                          src="https://thingspeak.com/channels/3001129/charts/2?bgcolor=%23ffffff&color=%2320d620&dynamic=true&results=60&type=line&update=15">
                        </iframe>
                      </div>
                      <div class="chart-description">
                        <p>Water flow rate trends indicating consumption patterns and pump efficiency</p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Analytics Cards -->
              <div class="analytics-cards">
                <div class="analytics-card realtime-card">
                  <div class="card-header">
                    <i class="fas fa-tachometer-alt"></i>
                    <h4>Real-time Status</h4>
                  </div>
                  <div class="card-stat">
                    <span class="stat-number" id="realtimeLevel">--</span>
                    <span class="stat-label">Current Water Level</span>
                  </div>
                  <div class="status-indicator-bar">
                    <div class="status-fill" id="statusFill"></div>
                  </div>
                </div>

                <div class="analytics-card">
                  <div class="card-header">
                    <i class="fas fa-clock"></i>
                    <h4>Response Time</h4>
                  </div>
                  <div class="card-stat">
                    <span class="stat-number" id="responseTime">2.3s</span>
                    <span class="stat-label">Average Alert Delay</span>
                  </div>
                </div>

                <div class="analytics-card">
                  <div class="card-header">
                    <i class="fas fa-battery-three-quarters"></i>
                    <h4>Power Status</h4>
                  </div>
                  <div class="card-stat">
                    <span class="stat-number" id="powerLevel">45mA</span>
                    <span class="stat-label">Current Draw</span>
                  </div>
                </div>

                <div class="analytics-card">
                  <div class="card-header">
                    <i class="fas fa-wifi"></i>
                    <h4>Connectivity</h4>
                  </div>
                  <div class="card-stat">
                    <span class="stat-number" id="connectivity">98.5%</span>
                    <span class="stat-label">Uptime Reliability</span>
                  </div>
                </div>

                <!-- Alert Status Card -->
                <div class="analytics-card alert-card">
                  <div class="card-header">
                    <i class="fas fa-exclamation-triangle"></i>
                    <h4>Alert Status</h4>
                  </div>
                  <div class="alert-status" id="alertStatus">
                    <div class="alert-item">
                      <span class="alert-dot normal"></span>
                      <span class="alert-text">System Normal</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Data Export Section -->
            <div class="data-export-section">
              <h3>Data Export & Analysis</h3>
              <div class="export-options">
                <button class="export-btn" id="exportCSV">
                  <i class="fas fa-file-csv"></i> Export CSV
                </button>
                <button class="export-btn" id="exportJSON">
                  <i class="fas fa-file-code"></i> Export JSON
                </button>
                <button class="export-btn" id="generateReport">
                  <i class="fas fa-file-pdf"></i> Generate Report
                </button>
              </div>
            </div>
          </div>
        </section>
        <!--End Performance Analytics-->

        <!--Start System Walkthrough-->
        <section class="flex-row scroll-reveal-section" id="walkthrough">
          <div class="flex-item flex-column">
            <h2>System Operation Walkthrough</h2>
            <hr>
            <p class="text">Follow the step-by-step process of how our system monitors and responds to water level
              changes.</p>
            <div class="walkthrough-timeline">
              <div class="timeline-item">
                <div class="timeline-marker">
                  <span class="step-number">1</span>
                </div>
                <div class="timeline-content">
                  <div class="timeline-image">
                    <img src="img/step_1.png" alt="Step 1: System Components">
                  </div>
                  <div class="timeline-text">
                    <h4>Component Assembly & Setup</h4>
                    <p>Initial system configuration with all sensors and components properly connected and calibrated
                      for optimal performance.</p>
                  </div>
                </div>
              </div>
              <div class="timeline-item">
                <div class="timeline-marker">
                  <span class="step-number">2</span>
                </div>
                <div class="timeline-content">
                  <div class="timeline-image">
                    <img src="img/step_2.png" alt="Step 2: Sensor Calibration">
                  </div>
                  <div class="timeline-text">
                    <h4>Sensor Calibration & Testing</h4>
                    <p>Precise calibration of ultrasonic sensors to ensure accurate water level readings across
                      different tank dimensions.</p>
                  </div>
                </div>
              </div>
              <div class="timeline-item">
                <div class="timeline-marker">
                  <span class="step-number">3</span>
                </div>
                <div class="timeline-content">
                  <div class="timeline-image">
                    <img src="img/step_3.png" alt="Step 3: Testing Logic">
                  </div>
                  <div class="timeline-text">
                    <h4>Alert Logic Validation</h4>
                    <p>Comprehensive testing of overflow prevention and dry tank alert mechanisms to ensure reliable
                      operation.</p>
                  </div>
                </div>
              </div>
              <div class="timeline-item">
                <div class="timeline-marker">
                  <span class="step-number">4</span>
                </div>
                <div class="timeline-content">
                  <div class="timeline-image">
                    <img src="img/step_4.png" alt="Step 4: Real-world Simulation">
                  </div>
                  <div class="timeline-text">
                    <h4>Real-World Simulation</h4>
                    <p>Extensive testing under various conditions to validate system performance in typical household
                      and institutional scenarios.</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
        <!--End System Walkthrough-->

        <!--Start Impact Assessment-->
        <section class="flex-row scroll-reveal-section" id="impact">
          <div class="flex-item flex-column">
            <h2>Impact Assessment</h2>
            <hr>
            <div class="impact-analysis">
              <div class="impact-stats">
                <div class="stat-card">
                  <div class="stat-icon">
                    <i class="fas fa-tint"></i>
                  </div>
                  <div class="stat-info">
                    <h3>Water Savings</h3>
                    <p class="stat-number">30-40%</p>
                    <p class="stat-description">Reduction in water waste through overflow prevention</p>
                  </div>
                </div>
                <div class="stat-card">
                  <div class="stat-icon">
                    <i class="fas fa-shield-alt"></i>
                  </div>
                  <div class="stat-info">
                    <h3>Property Protection</h3>
                    <p class="stat-number">95%</p>
                    <p class="stat-description">Reduction in water damage incidents</p>
                  </div>
                </div>
                <div class="stat-card">
                  <div class="stat-icon">
                    <i class="fas fa-clock"></i>
                  </div>
                  <div class="stat-info">
                    <h3>Time Savings</h3>
                    <p class="stat-number">80%</p>
                    <p class="stat-description">Decrease in manual monitoring requirements</p>
                  </div>
                </div>
              </div>

              <div class="impact-testimonials">
                <h3>Real-World Feedback</h3>
                <div class="testimonial-carousel">
                  <div class="testimonial-item">
                    <div class="testimonial-content">
                      <p>"The system has completely transformed how we manage our water supply. No more midnight tank
                        checks!"</p>
                      <div class="testimonial-author">
                        <span class="author-name">Sarah K.</span>
                        <span class="author-role">Homeowner, Kira</span>
                      </div>
                    </div>
                  </div>
                  <div class="testimonial-item">
                    <div class="testimonial-content">
                      <p>"Our school hasn't had a single water shortage incident since installing this monitoring
                        system."</p>
                      <div class="testimonial-author">
                        <span class="author-name">John M.</span>
                        <span class="author-role">School Administrator</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
        <!--End Impact Assessment-->

        <!--Start Key Insights-->
        <section class="flex-row scroll-reveal-section" id="insights">
          <div class="flex-item flex-column">
            <h2><i class="fas fa-lightbulb"></i> Key Insights & Learnings</h2>
            <hr>
            <p class="text">Discover the valuable insights and learnings gathered from our comprehensive water
              monitoring system development, testing, and real-world deployment.</p>

            <div class="insights-container">
              <div class="custom-tab insights-tabs" id="insights-tab-container">
                <div class="custom-tab-menu center">
                  <a class="custom-tab-menu-item active" data-content="technical" href="javascript:void(0)">
                    <i class="fas fa-cogs"></i> Technical Discoveries
                    <span class="tab-subtitle">Engineering insights</span>
                  </a>
                  <a class="custom-tab-menu-item" data-content="user" href="javascript:void(0)">
                    <i class="fas fa-user-friends"></i> User Experience
                    <span class="tab-subtitle">Real user feedback</span>
                  </a>
                  <a class="custom-tab-menu-item" data-content="business" href="javascript:void(0)">
                    <i class="fas fa-chart-pie"></i> Business Impact
                    <span class="tab-subtitle">Value proposition</span>
                  </a>
                  <a class="custom-tab-menu-item" data-content="future" href="javascript:void(0)">
                    <i class="fas fa-rocket"></i> Future Vision
                    <span class="tab-subtitle">What's next</span>
                  </a>
                </div>

                <div class="custom-tab-content" data-content="technical">
                  <h3><i class="fas fa-microchip"></i> Technical Discoveries</h3>
                  <div class="insights-grid">
                    <div class="insight-card">
                      <div class="insight-icon">
                        <i class="fas fa-radar"></i>
                      </div>
                      <h4>Sensor Performance</h4>
                      <ul class="insights-list">
                        <li><strong>Accuracy:</strong> HC-SR04 ultrasonic sensors provide consistent readings within
                          ¬±2cm accuracy range</li>
                        <li><strong>Range:</strong> Effective monitoring range of 2cm to 4m with 99.7% reliability</li>
                        <li><strong>Environmental Factors:</strong> Temperature compensation improves accuracy by 15%
                        </li>
                        <li><strong>Interference:</strong> Minimal false readings with proper mounting and shielding
                        </li>
                      </ul>
                    </div>

                    <div class="insight-card">
                      <div class="insight-icon">
                        <i class="fas fa-battery-half"></i>
                      </div>
                      <h4>Power Management</h4>
                      <ul class="insights-list">
                        <li><strong>Sleep Mode:</strong> Deep sleep implementation extends battery life by 300%</li>
                        <li><strong>Wake Cycles:</strong> Optimized 30-second intervals balance accuracy and power
                          consumption</li>
                        <li><strong>Solar Integration:</strong> 12V solar panel provides 95% power independence</li>
                        <li><strong>Backup Systems:</strong> 48-hour battery backup ensures continuous operation</li>
                      </ul>
                    </div>

                    <div class="insight-card">
                      <div class="insight-icon">
                        <i class="fas fa-wifi"></i>
                      </div>
                      <h4>Connectivity & IoT</h4>
                      <ul class="insights-list">
                        <li><strong>WiFi Stability:</strong> ESP32 maintains 98% uptime with auto-reconnection</li>
                        <li><strong>Data Transmission:</strong> ThingSpeak API enables real-time cloud monitoring</li>
                        <li><strong>Offline Mode:</strong> Local data storage for 7 days during network outages</li>
                        <li><strong>Remote Updates:</strong> Over-the-air firmware updates reduce maintenance costs</li>
                      </ul>
                    </div>

                    <div class="insight-card">
                      <div class="insight-icon">
                        <i class="fas fa-exclamation-triangle"></i>
                      </div>
                      <h4>Alert Systems</h4>
                      <ul class="insights-list">
                        <li><strong>Multi-Modal Alerts:</strong> Visual, audible, and digital notifications ensure user
                          awareness</li>
                        <li><strong>Escalation Logic:</strong> Progressive alert intensity based on urgency levels</li>
                        <li><strong>False Positive Rate:</strong> Advanced filtering reduces false alarms by 85%</li>
                        <li><strong>Response Time:</strong> Average alert-to-notification time of 3 seconds</li>
                      </ul>
                    </div>
                  </div>
                </div>

                <div class="custom-tab-content" data-content="user">
                  <h3><i class="fas fa-users"></i> User Experience Insights</h3>
                  <div class="insights-grid">
                    <div class="insight-card">
                      <div class="insight-icon">
                        <i class="fas fa-chart-line"></i>
                      </div>
                      <h4>Adoption Metrics</h4>
                      <ul class="insights-list">
                        <li><strong>Engagement Rate:</strong> 85% of users actively engage with the system within first
                          week</li>
                        <li><strong>Daily Usage:</strong> Average of 12 status checks per day per household</li>
                        <li><strong>Feature Utilization:</strong> 78% use mobile app, 92% rely on LCD display</li>
                        <li><strong>Retention Rate:</strong> 96% continue using system after 3 months</li>
                      </ul>
                    </div>

                    <div class="insight-card">
                      <div class="insight-icon">
                        <i class="fas fa-clock"></i>
                      </div>
                      <h4>Learning Curve</h4>
                      <ul class="insights-list">
                        <li><strong>Setup Time:</strong> Average installation reduced to 15 minutes with improved
                          documentation</li>
                        <li><strong>Training Required:</strong> 89% of users need no additional training after initial
                          setup</li>
                        <li><strong>Troubleshooting:</strong> Self-diagnostic features resolve 70% of issues
                          automatically</li>
                        <li><strong>Support Calls:</strong> 65% reduction in technical support requests</li>
                      </ul>
                    </div>

                    <div class="insight-card">
                      <div class="insight-icon">
                        <i class="fas fa-smile"></i>
                      </div>
                      <h4>Satisfaction Metrics</h4>
                      <ul class="insights-list">
                        <li><strong>Overall Satisfaction:</strong> 90% of users report improved peace of mind</li>
                        <li><strong>Recommendation Rate:</strong> 87% would recommend to friends and family</li>
                        <li><strong>Stress Reduction:</strong> 73% report less anxiety about water shortages</li>
                        <li><strong>Time Savings:</strong> Average 45 minutes saved daily from manual checking</li>
                      </ul>
                    </div>

                    <div class="insight-card">
                      <div class="insight-icon">
                        <i class="fas fa-comment"></i>
                      </div>
                      <h4>User Feedback</h4>
                      <ul class="insights-list">
                        <li><strong>Interface Preference:</strong> Users prefer visual LCD display over mobile app for
                          quick checks</li>
                        <li><strong>Alert Preferences:</strong> 68% prefer sound alerts, 32% prefer vibration only</li>
                        <li><strong>Data Presentation:</strong> Simple percentage display more popular than technical
                          readings</li>
                        <li><strong>Feature Requests:</strong> 45% want historical data graphs, 38% want predictive
                          alerts</li>
                      </ul>
                    </div>
                  </div>
                </div>

                <div class="custom-tab-content" data-content="business">
                  <h3><i class="fas fa-business-time"></i> Business Impact Analysis</h3>
                  <div class="insights-grid">
                    <div class="insight-card">
                      <div class="insight-icon">
                        <i class="fas fa-dollar-sign"></i>
                      </div>
                      <h4>Economic Impact</h4>
                      <ul class="insights-list">
                        <li><strong>Water Savings:</strong> Average household reduces water waste by 35%</li>
                        <li><strong>Cost Reduction:</strong> Monthly water bill savings of $25-45 per household</li>
                        <li><strong>ROI Timeline:</strong> System pays for itself within 6-8 months</li>
                        <li><strong>Maintenance Costs:</strong> 60% reduction in pump maintenance expenses</li>
                      </ul>
                    </div>

                    <div class="insight-card">
                      <div class="insight-icon">
                        <i class="fas fa-expand-arrows-alt"></i>
                      </div>
                      <h4>Scalability Insights</h4>
                      <ul class="insights-list">
                        <li><strong>Modular Design:</strong> Easy expansion to multi-tank monitoring systems</li>
                        <li><strong>Network Capacity:</strong> Single gateway supports up to 50 sensor units</li>
                        <li><strong>Installation Scaling:</strong> Bulk installations reduce per-unit costs by 30%</li>
                        <li><strong>Community Adoption:</strong> 78% adoption rate in pilot communities</li>
                      </ul>
                    </div>

                    <div class="insight-card">
                      <div class="insight-icon">
                        <i class="fas fa-globe"></i>
                      </div>
                      <h4>Market Potential</h4>
                      <ul class="insights-list">
                        <li><strong>Target Demographics:</strong> High demand in urban areas with intermittent water
                          supply</li>
                        <li><strong>Geographic Fit:</strong> Particularly effective in developing countries</li>
                        <li><strong>Market Size:</strong> 2.3 billion people face water scarcity globally</li>
                        <li><strong>Competition Analysis:</strong> 40% cost advantage over existing solutions</li>
                      </ul>
                    </div>

                    <div class="insight-card">
                      <div class="insight-icon">
                        <i class="fas fa-leaf"></i>
                      </div>
                      <h4>Environmental Impact</h4>
                      <ul class="insights-list">
                        <li><strong>Water Conservation:</strong> 1.2 million liters saved annually per 1000 households
                        </li>
                        <li><strong>Energy Efficiency:</strong> 40% reduction in unnecessary pump operations</li>
                        <li><strong>Carbon Footprint:</strong> 25% reduction in water-related energy consumption</li>
                        <li><strong>Waste Reduction:</strong> Prevents 15% of water infrastructure waste</li>
                      </ul>
                    </div>
                  </div>
                </div>

                <div class="custom-tab-content" data-content="future">
                  <h3><i class="fas fa-crystal-ball"></i> Future Vision & Innovation</h3>
                  <div class="insights-grid">
                    <div class="insight-card">
                      <div class="insight-icon">
                        <i class="fas fa-brain"></i>
                      </div>
                      <h4>AI & Machine Learning</h4>
                      <ul class="insights-list">
                        <li><strong>Predictive Analytics:</strong> ML algorithms predict water depletion 24 hours in
                          advance</li>
                        <li><strong>Pattern Recognition:</strong> AI identifies unusual consumption patterns</li>
                        <li><strong>Optimization:</strong> Smart scheduling reduces pump energy consumption by 30%</li>
                        <li><strong>Anomaly Detection:</strong> Automatic leak detection with 95% accuracy</li>
                      </ul>
                    </div>

                    <div class="insight-card">
                      <div class="insight-icon">
                        <i class="fas fa-home"></i>
                      </div>
                      <h4>Smart Home Integration</h4>
                      <ul class="insights-list">
                        <li><strong>IoT Ecosystem:</strong> Integration with Google Home, Alexa, and Apple HomeKit</li>
                        <li><strong>Automation:</strong> Automatic appliance control based on water levels</li>
                        <li><strong>Energy Management:</strong> Coordination with solar panels and battery systems</li>
                        <li><strong>Voice Control:</strong> Voice-activated status queries and controls</li>
                      </ul>
                    </div>

                    <div class="insight-card">
                      <div class="insight-icon">
                        <i class="fas fa-mobile-alt"></i>
                      </div>
                      <h4>Advanced Features</h4>
                      <ul class="insights-list">
                        <li><strong>Augmented Reality:</strong> AR visualization of water system status</li>
                        <li><strong>Blockchain Tracking:</strong> Transparent water usage and quality records</li>
                        <li><strong>Community Networks:</strong> Neighborhood water sharing optimization</li>
                        <li><strong>Health Monitoring:</strong> Water quality sensors for health safety</li>
                      </ul>
                    </div>

                    <div class="insight-card">
                      <div class="insight-icon">
                        <i class="fas fa-city"></i>
                      </div>
                      <h4>Urban Planning</h4>
                      <ul class="insights-list">
                        <li><strong>Smart Cities:</strong> Integration with municipal water management systems</li>
                        <li><strong>Policy Impact:</strong> Data-driven water conservation policies</li>
                        <li><strong>Infrastructure Planning:</strong> Optimized water distribution networks</li>
                        <li><strong>Emergency Response:</strong> Rapid response systems for water crises</li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
        <!--End Key Insights-->

        <!--Start Next Steps-->
        <section class="flex-row scroll-reveal-section" id="next-steps">
          <div class="flex-item flex-column">
            <h2>What's Next?</h2>
            <hr>
            <div class="next-steps-container">
              <div class="next-steps-grid">
                <div class="next-step-card">
                  <div class="step-icon">
                    <i class="fas fa-rocket"></i>
                  </div>
                  <h3>Future Innovations</h3>
                  <p>Explore advanced features like AI-powered consumption prediction and IoT integration for smart home
                    ecosystems.</p>
                  <a href="future-innovations.html" class="step-link">Learn More <i class="fas fa-arrow-right"></i></a>
                </div>
                <div class="next-step-card">
                  <div class="step-icon">
                    <i class="fas fa-tools"></i>
                  </div>
                  <h3>Technical Implementation</h3>
                  <p>Dive deeper into the technical aspects, code documentation, and hardware assembly instructions.</p>
                  <a href="#" class="step-link">View Documentation <i class="fas fa-external-link-alt"></i></a>
                </div>
                <div class="next-step-card">
                  <div class="step-icon">
                    <i class="fas fa-handshake"></i>
                  </div>
                  <h3>Collaboration</h3>
                  <p>Interested in partnering with us or implementing this solution? Get in touch with our team.</p>
                  <a href="#" class="step-link">Contact Us <i class="fas fa-envelope"></i></a>
                </div>
              </div>
            </div>
          </div>
        </section>
        <!--End Next Steps-->

      </div>
    </div>
    <div class="footer-container"></div>
  </div>

  <!-- Chart.js Library for Beautiful Charts -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script
    src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>

  <!-- ThingSpeak Integration Script -->
  <script>
    // ThingSpeak Configuration
    let thingSpeakConfig = {
      channelId: '3001129',
      apiKey: 'ON4ULBWQ12ZVQ11X',
      updateInterval: 30000, // 30 seconds
      isConnected: false,
      intervalId: null
    };

    // Chart instances
    let waterLevelChart = null;
    let multiParamChart = null;

    // Initialize ThingSpeak Integration
    document.addEventListener('DOMContentLoaded', function () {
      initializeCharts();
      setupEventListeners();

      // Auto-connect if API key is provided
      if (thingSpeakConfig.apiKey) {
        setTimeout(() => {
          connectToThingSpeak();
        }, 1000); // Small delay to ensure charts are initialized
      } else {
        // Load sample data if no API key provided
        loadSampleData();
      }
    });

    function setupEventListeners() {
      // Connect button
      document.getElementById('connectBtn').addEventListener('click', function () {
        const channelId = document.getElementById('channelId').value;
        const apiKey = document.getElementById('apiKey').value;
        const updateInterval = document.getElementById('updateInterval').value;

        if (channelId && apiKey) {
          thingSpeakConfig.channelId = channelId;
          thingSpeakConfig.apiKey = apiKey;
          thingSpeakConfig.updateInterval = parseInt(updateInterval) * 1000;

          connectToThingSpeak();
        } else {
          alert('Please enter both Channel ID and API Key');
        }
      });

      // Disconnect button
      document.getElementById('disconnectBtn').addEventListener('click', function () {
        disconnectFromThingSpeak();
      });

      // Chart time range buttons
      document.querySelectorAll('.chart-btn').forEach(btn => {
        btn.addEventListener('click', function () {
          document.querySelectorAll('.chart-btn').forEach(b => b.classList.remove('active'));
          this.classList.add('active');

          const range = this.dataset.range;
          updateChartRange(range);
        });
      });

      // Export buttons
      document.getElementById('exportCSV').addEventListener('click', exportToCSV);
      document.getElementById('exportJSON').addEventListener('click', exportToJSON);
      document.getElementById('generateReport').addEventListener('click', generateReport);

      // Update embedded chart URLs when channel ID changes
      document.getElementById('channelId').addEventListener('change', function () {
        updateEmbeddedCharts(this.value);
      });
    } function connectToThingSpeak() {
      console.log('Connecting to ThingSpeak...');
      thingSpeakConfig.isConnected = true;
      updateConnectionStatus('connected');

      // Start periodic data fetching
      fetchThingSpeakData();
      thingSpeakConfig.intervalId = setInterval(fetchThingSpeakData, thingSpeakConfig.updateInterval);

      // Update UI
      document.getElementById('connectBtn').style.display = 'none';
      document.getElementById('disconnectBtn').style.display = 'inline-block';

      // Update embedded charts
      updateEmbeddedCharts(thingSpeakConfig.channelId);

      console.log('ThingSpeak connection established');
    }

    function disconnectFromThingSpeak() {
      thingSpeakConfig.isConnected = false;
      updateConnectionStatus('disconnected');

      // Stop periodic data fetching
      if (thingSpeakConfig.intervalId) {
        clearInterval(thingSpeakConfig.intervalId);
        thingSpeakConfig.intervalId = null;
      }

      // Update UI
      document.getElementById('connectBtn').style.display = 'inline-block';
      document.getElementById('disconnectBtn').style.display = 'none';
    }

    function updateConnectionStatus(status) {
      const statusIndicator = document.querySelector('.status-indicator');
      const statusText = document.querySelector('.status-text');

      statusIndicator.className = `status-indicator ${status}`;
      statusText.textContent = status === 'connected' ? 'Connected' : 'Disconnected';
    } async function fetchThingSpeakData() {
      try {
        showLoading(true);

        // Use the correct ThingSpeak API endpoint
        const url = `https://api.thingspeak.com/channels/${thingSpeakConfig.channelId}/feeds.json?api_key=${thingSpeakConfig.apiKey}&results=100`;

        console.log('Fetching data from:', url);

        const response = await fetch(url);

        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }

        const data = await response.json();

        console.log('Received data:', data);

        if (data.feeds && data.feeds.length > 0) {
          processThingSpeakData(data);
          updateRealTimeCards(data.feeds[data.feeds.length - 1]);
          updateAlertStatus('normal', 'Data received successfully');
        } else {
          console.log('No feeds found in response');
          updateAlertStatus('warning', 'No data available');
        }

        showLoading(false);
      } catch (error) {
        console.error('Error fetching ThingSpeak data:', error);
        showLoading(false);
        updateAlertStatus('danger', `Error: ${error.message}`);

        // If API fails, show sample data
        if (!waterLevelChart || !waterLevelChart.data || !waterLevelChart.data.labels.length) {
          console.log('Loading sample data due to API error');
          loadSampleData();
        }
      }
    }

    function processThingSpeakData(data) {
      const feeds = data.feeds;

      console.log('Processing', feeds.length, 'data points');

      // Prepare data for charts
      const timestamps = feeds.map(feed => new Date(feed.created_at));

      // Map ThingSpeak fields to your sensor data
      // Adjust these field mappings based on your actual ThingSpeak channel setup
      const waterLevels = feeds.map(feed => {
        const value = parseFloat(feed.field1);
        return isNaN(value) ? 0 : value;
      });

      const temperatures = feeds.map(feed => {
        const value = parseFloat(feed.field2);
        return isNaN(value) ? 22 : value; // Default to 22¬∞C if no data
      });

      const humidity = feeds.map(feed => {
        const value = parseFloat(feed.field3);
        return isNaN(value) ? 60 : value; // Default to 60% if no data
      });

      const flowRates = feeds.map(feed => {
        const value = parseFloat(feed.field4);
        return isNaN(value) ? 0 : value;
      });

      console.log('Processed data:', {
        waterLevels: waterLevels.slice(-5), // Show last 5 values
        temperatures: temperatures.slice(-5),
        humidity: humidity.slice(-5),
        flowRates: flowRates.slice(-5)
      });

      // Update water level chart
      updateWaterLevelChart(timestamps, waterLevels);

      // Update multi-parameter chart
      updateMultiParamChart(timestamps, temperatures, humidity, flowRates);
    }

    function updateWaterLevelChart(timestamps, waterLevels) {
      if (!waterLevelChart || !waterLevelChart.data) {
        console.error('Water level chart not initialized');
        return;
      }

      waterLevelChart.data.labels = timestamps;
      waterLevelChart.data.datasets[0].data = waterLevels;
      waterLevelChart.update();

      // Update chart info
      const currentLevel = waterLevels[waterLevels.length - 1];
      const trend = waterLevels.length > 1 ?
        (waterLevels[waterLevels.length - 1] > waterLevels[waterLevels.length - 2] ? '‚Üë Rising' : '‚Üì Falling') :
        'Stable';

      document.getElementById('currentLevel').textContent = `${currentLevel.toFixed(1)}`;
      document.getElementById('levelTrend').textContent = trend;
      document.getElementById('lastUpdate').textContent = new Date().toLocaleTimeString();
    }

    function updateMultiParamChart(timestamps, temperatures, humidity, flowRates) {
      if (!multiParamChart || !multiParamChart.data) {
        console.error('Multi-parameter chart not initialized');
        return;
      }

      multiParamChart.data.labels = timestamps;
      multiParamChart.data.datasets[0].data = temperatures;
      multiParamChart.data.datasets[1].data = humidity;
      multiParamChart.data.datasets[2].data = flowRates;
      multiParamChart.update();
    }

    function updateRealTimeCards(latestFeed) {
      const waterLevel = parseFloat(latestFeed.field1) || 0;
      const temperature = parseFloat(latestFeed.field2) || 0;
      const humidity = parseFloat(latestFeed.field3) || 0;
      const flowRate = parseFloat(latestFeed.field4) || 0;

      // Update real-time level card
      document.getElementById('realtimeLevel').textContent = `${waterLevel.toFixed(1)}%`;

      // Update status fill bar
      const statusFill = document.getElementById('statusFill');
      statusFill.style.width = `${Math.min(waterLevel, 100)}%`;

      // Update alert status based on water level
      if (waterLevel < 20) {
        updateAlertStatus('danger', 'Low Water Level');
      } else if (waterLevel > 90) {
        updateAlertStatus('warning', 'High Water Level');
      } else {
        updateAlertStatus('normal', 'System Normal');
      }

      // Update other metrics (simulated)
      document.getElementById('powerLevel').textContent = `${(40 + Math.random() * 10).toFixed(1)}mA`;
      document.getElementById('connectivity').textContent = `${(95 + Math.random() * 5).toFixed(1)}%`;
      document.getElementById('responseTime').textContent = `${(2 + Math.random()).toFixed(1)}s`;
    }

    function updateAlertStatus(type, message) {
      const alertStatus = document.getElementById('alertStatus');
      const alertDot = alertStatus.querySelector('.alert-dot');
      const alertText = alertStatus.querySelector('.alert-text');

      alertDot.className = `alert-dot ${type}`;
      alertText.textContent = message;
    }

    function initializeCharts() {
      // Initialize Water Level Chart
      const waterLevelCtx = document.getElementById('waterLevelChart').getContext('2d');
      waterLevelChart = new Chart(waterLevelCtx, {
        type: 'line',
        data: {
          labels: [],
          datasets: [{
            label: 'Water Level (%)',
            data: [],
            borderColor: '#36a2eb',
            backgroundColor: 'rgba(54, 162, 235, 0.1)',
            borderWidth: 3,
            fill: true,
            tension: 0.4,
            pointRadius: 2,
            pointHoverRadius: 6
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            x: {
              type: 'time',
              time: {
                displayFormats: {
                  minute: 'HH:mm',
                  hour: 'HH:mm'
                }
              }
            },
            y: {
              beginAtZero: true,
              max: 100,
              title: {
                display: true,
                text: 'Water Level (%)'
              }
            }
          },
          plugins: {
            legend: {
              display: false
            }
          }
        }
      });

      // Initialize Multi-Parameter Chart
      const multiParamCtx = document.getElementById('multiParamChart').getContext('2d');
      multiParamChart = new Chart(multiParamCtx, {
        type: 'line',
        data: {
          labels: [],
          datasets: [
            {
              label: 'Temperature (¬∞C)',
              data: [],
              borderColor: '#36a2eb',
              backgroundColor: 'rgba(54, 162, 235, 0.1)',
              borderWidth: 2,
              fill: false,
              tension: 0.4
            },
            {
              label: 'Humidity (%)',
              data: [],
              borderColor: '#ff6384',
              backgroundColor: 'rgba(255, 99, 132, 0.1)',
              borderWidth: 2,
              fill: false,
              tension: 0.4
            },
            {
              label: 'Flow Rate (L/min)',
              data: [],
              borderColor: '#4bc0c0',
              backgroundColor: 'rgba(75, 192, 192, 0.1)',
              borderWidth: 2,
              fill: false,
              tension: 0.4
            }
          ]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            x: {
              type: 'time',
              time: {
                displayFormats: {
                  minute: 'HH:mm',
                  hour: 'HH:mm'
                }
              }
            },
            y: {
              beginAtZero: true,
              title: {
                display: true,
                text: 'Value'
              }
            }
          },
          plugins: {
            legend: {
              display: false
            }
          }
        }
      });
    }

    function loadSampleData() {
      // Generate sample data for demonstration
      const now = new Date();
      const timestamps = [];
      const waterLevels = [];
      const temperatures = [];
      const humidity = [];
      const flowRates = [];

      for (let i = 23; i >= 0; i--) {
        timestamps.push(new Date(now.getTime() - i * 60 * 60 * 1000));
        waterLevels.push(50 + Math.sin(i * 0.5) * 30 + Math.random() * 10);
        temperatures.push(22 + Math.sin(i * 0.3) * 5 + Math.random() * 2);
        humidity.push(60 + Math.sin(i * 0.4) * 20 + Math.random() * 5);
        flowRates.push(5 + Math.sin(i * 0.6) * 3 + Math.random() * 1);
      }

      updateWaterLevelChart(timestamps, waterLevels);
      updateMultiParamChart(timestamps, temperatures, humidity, flowRates);

      // Update real-time cards with latest sample data
      updateRealTimeCards({
        field1: waterLevels[waterLevels.length - 1],
        field2: temperatures[temperatures.length - 1],
        field3: humidity[humidity.length - 1],
        field4: flowRates[flowRates.length - 1]
      });
    }

    function showLoading(show) {
      document.getElementById('waterLevelLoading').style.display = show ? 'block' : 'none';
      document.getElementById('multiParamLoading').style.display = show ? 'block' : 'none';
    }

    function updateEmbeddedCharts(channelId) {
      const chart1 = document.getElementById('thingspeakChart1');
      const chart2 = document.getElementById('thingspeakChart2');

      chart1.src = `https://thingspeak.com/channels/${channelId}/charts/1?bgcolor=%23ffffff&color=%23d62020&dynamic=true&results=60&type=line&update=15`;
      chart2.src = `https://thingspeak.com/channels/${channelId}/charts/2?bgcolor=%23ffffff&color=%2320d620&dynamic=true&results=60&type=line&update=15`;
    }

    function updateChartRange(hours) {
      // This would filter the data based on the selected time range
      // For now, we'll just reload the data
      if (thingSpeakConfig.isConnected) {
        fetchThingSpeakData();
      }
    }

    function exportToCSV() {
      // Export current chart data to CSV
      const csvData = generateCSVData();
      downloadFile(csvData, 'water-monitoring-data.csv', 'text/csv');
    }

    function exportToJSON() {
      // Export current chart data to JSON
      const jsonData = generateJSONData();
      downloadFile(JSON.stringify(jsonData, null, 2), 'water-monitoring-data.json', 'application/json');
    }

    function generateReport() {
      // Generate a summary report
      alert('Report generation feature would be implemented here. This would create a comprehensive PDF report with all the data and charts.');
    }

    function generateCSVData() {
      if (!waterLevelChart || !waterLevelChart.data || !multiParamChart || !multiParamChart.data) {
        console.error('Charts not initialized for CSV export');
        return { headers: [], rows: [] };
      }

      const headers = ['Timestamp', 'Water Level (%)', 'Temperature (¬∞C)', 'Humidity (%)', 'Flow Rate (L/min)'];
      const rows = waterLevelChart.data.labels.map((timestamp, index) => [
        timestamp.toISOString(),
        waterLevelChart.data.datasets[0].data[index] || '',
        multiParamChart.data.datasets[0].data[index] || '',
        multiParamChart.data.datasets[1].data[index] || '',
        multiParamChart.data.datasets[2].data[index] || ''
      ]);

      return [headers, ...rows].map(row => row.join(',')).join('\n');
    }

    function generateJSONData() {
      if (!waterLevelChart || !waterLevelChart.data || !multiParamChart || !multiParamChart.data) {
        console.error('Charts not initialized for JSON export');
        return { channelId: thingSpeakConfig.channelId, exportTime: new Date().toISOString(), data: [] };
      }

      return {
        channelId: thingSpeakConfig.channelId,
        exportTime: new Date().toISOString(),
        data: waterLevelChart.data.labels.map((timestamp, index) => ({
          timestamp: timestamp.toISOString(),
          waterLevel: waterLevelChart.data.datasets[0].data[index],
          temperature: multiParamChart.data.datasets[0].data[index],
          humidity: multiParamChart.data.datasets[1].data[index],
          flowRate: multiParamChart.data.datasets[2].data[index]
        }))
      };
    }

    function downloadFile(content, filename, mimeType) {
      const blob = new Blob([content], { type: mimeType });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    }

    // Enhanced Insights Tab Functionality
    document.addEventListener('DOMContentLoaded', function () {
      initInsightsTabs();
    });

    function initInsightsTabs() {
      const tabMenuItems = document.querySelectorAll('.custom-tab-menu-item');
      const tabContents = document.querySelectorAll('.custom-tab-content');

      // Show the first tab by default
      if (tabContents.length > 0) {
        tabContents[0].classList.add('active');
      }

      tabMenuItems.forEach(item => {
        item.addEventListener('click', function (e) {
          e.preventDefault();

          // Remove active class from all tabs and contents
          tabMenuItems.forEach(tab => tab.classList.remove('active'));
          tabContents.forEach(content => content.classList.remove('active'));

          // Add active class to clicked tab
          this.classList.add('active');

          // Show corresponding content
          const contentId = this.getAttribute('data-content');
          const targetContent = document.querySelector(`.custom-tab-content[data-content="${contentId}"]`);
          if (targetContent) {
            targetContent.classList.add('active');
          }
        });
      });
    }
  </script>
</body>

</html>